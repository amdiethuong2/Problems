uses math;

const
        maxn = 1000128;

var
        n, m    : longint;
        par     : array[1..maxn] of longint;

function find (u : longint) : longint;
begin
        if u = par[u] then exit (u);
        par[u] := find(par[u]);
        exit (par[u]);
end;

var
        i, u, v : longint;

begin
        assign(input, ''); reset(input);
        assign(output, ''); rewrite(output);

        read(n, m);

        for i := 1 to n do par[i] := i;

        for i := 1 to n do
        begin
           read(u);
           par[find(i)] := find(u);
        end;

        par[find(1)] := find(2);

        for i := 1 to m do
        begin
           read(u, v);
           if find(u) = find(v) then writeln('Yes')
           else writeln('No');
        end;

        close(input);
        close(output);
end.