#include<stdio.h>
#define M 320
int d[M][M];
void minimize(int &a,int b){
    if( a > b ) a = b;
}
int max(int a,int b){
    if( a > b ) return a;
    return b;
}
int n,m,t;
main(){
    freopen("test.inp","r",stdin);
    scanf("%d %d %d",&n,&m,&t);
    for(int i = 1 ; i <= n ; i++)
        for(int j = 1 ; j <= n ; j++)
            if( i == j ) d[i][j] = 0;
            else d[i][j]  = 1e8;
    for(int i = 1 ; i <= m ; i++){
        int u,v,c;
        scanf("%d %d %d",&u,&v,&c);
        minimize(d[u][v],c);
    }
    for(int k = 1 ; k <= n ; k++)
        for(int u = 1 ; u <= n ; u++)
            for(int v = 1 ; v <= n ; v++)
                minimize(d[u][v] , max(d[u][k],d[k][v]));
    for(int i = 1 ; i <= t ; i++){
        int a,b;
        scanf("%d %d",&a,&b);
        if( d[a][b] < 1e8 ) printf("%d",d[a][b]);
        else printf("-1");
        printf("\n");
    }
}
